<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary Meta -->
  <title>Pendle YT Timing Tool</title>
  <meta name="description" content="A powerful Pendle YT tool to track and analyze YT prices and points.">

  <!-- Open Graph -->
  <meta property="og:title" content="Pendle YT Tool" />
  <meta property="og:description" content="A powerful Pendle YT tool to track and analyze YT prices and points." />
  <meta property="og:image" content="https://quantsheep.com/images/og-image.jpg" />
  <meta property="og:url" content="https://quantsheep.com" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:title" content="Pendle YT Tool" />
  <meta name="twitter:description" content="A powerful Pendle YT tool to track and analyze YT prices and points." />
  <meta name="twitter:image" content="https://quantsheep.com/images/twitter-card.jpg" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Icons -->
  <link rel="icon" href="/images/favicon.ico" />

  <!-- Perf -->
  <link rel="preconnect" href="https://api-v2.pendle.finance" crossorigin>

  <!-- Styles -->
  <link rel="preload" href="/assets/app.css" as="style">
  <link rel="stylesheet" href="/assets/app.css">

  <!-- Scripts (self-hosted) -->
  <script src="/vendor/plotly-2.35.2.min.js" defer></script>
  <script src="/assets/app.js" defer></script>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="head-inner">
        <div class="brand">
          <div class="logo"></div>
          <div>
            <h1 id="title">Pendle YT Tool · Web</h1>
            <div class="badges">
              <span class="badge" id="badge-plotly">Plotly</span>
              <span class="badge" id="badge-standalone">No Backend · Direct API Connection</span>
            </div>
          </div>
        </div>
        <div class="toolbar">
          <a class="btn ghost" id="repoLink"
             href="https://github.com/labrinyang/Pendle-YT-Timing-Tool"
             target="_blank" rel="noopener noreferrer"
             aria-label="Open GitHub repository"
             title="Open GitHub repository">
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M12 .5C5.65.5.5 5.65.5 12c0 5.1 3.29 9.41 7.86 10.94.58.1.79-.25.79-.56v-2c-3.2.7-3.87-1.54-3.87-1.54-.53-1.34-1.3-1.7-1.3-1.7-1.06-.73.08-.72.08-.72 1.17.08 1.79 1.21 1.79 1.21 1.04 1.78 2.72 1.27 3.38.97.1-.75.41-1.27.75-1.56-2.55-.29-5.23-1.28-5.23-5.69 0-1.26.45-2.29 1.19-3.09-.12-.29-.52-1.45.11-3.02 0 0 .97-.31 3.18 1.18a11.1 11.1 0 0 1 5.8 0c2.2-1.49 3.17-1.18 3.17-1.18.63 1.57.23 2.73.11 3.02.74.8 1.19 1.83 1.19 3.09 0 4.42-2.69 5.4-5.25 5.68.42.36.8 1.08.8 2.19v3.25c0 .31.21.66.8.55A10.5 10.5 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5z"/>
            </svg>
            <span>Pendle-YT-Timing-Tool</span>
          </a>
          <button id="langToggle" class="btn ghost" aria-label="Switch language" title="Switch language">
            🌐 <span id="langLabel">EN</span>
          </button>
          <button id="toggleTheme" class="btn ghost">🌗 <span data-i18n="toggleTheme">Dark/Light Theme</span></button>
          <button id="run" class="btn primary">⚡ <span data-i18n="run">Run</span></button>
        </div>
      </div>
    </header>

    <!-- 控件 -->
    <div class="card fade-in">
      <div class="grid">
        <div class="col-3">
          <div class="label-wrapper">
            <label class="label" data-i18n="network">Network</label>
            <span class="help-icon">?
              <span class="tooltip" data-i18n="networkHelp">Select the blockchain of the market</span>
            </span>
          </div>
          <select id="network" class="select">
            <option value="ethereum" selected>ethereum</option>
            <option value="arbitrum">arbitrum</option>
            <option value="mantle">mantle</option>
            <option value="berachain">berachain</option>
            <option value="base">base</option>
            <option value="hyperevm">hyperevm</option>
          </select>
        </div>
        <div class="col-5">
          <div class="label-wrapper">
            <label class="label" data-i18n="market">Market Contract</label>
            <span class="help-icon">?
              <span class="tooltip" data-i18n="marketHelp">Contract address of the Pendle Market, available from the Specs of each market</span>
            </span>
          </div>
          <input id="market_contract" class="input" value="0x45f163e583d34b8e276445dd3da9ae077d137d72" />
        </div>
        <div class="col-4">
          <div class="label-wrapper">
            <label class="label" data-i18n="yt">YT Contract</label>
            <span class="help-icon">?
              <span class="tooltip" data-i18n="ytHelp">Contract address of the YT Token, available from the Specs of each market</span>
            </span>
          </div>
          <input id="yt_contract" class="input" value="0xff1e55f96fa77bcfb5d40f6641e0acabd47ac34f" />
        </div>
        <div class="col-4">
          <div class="label-wrapper">
            <label class="label" data-i18n="underlying">Underlying Amount</label>
            <span class="help-icon">?
              <span class="tooltip" data-i18n="underlyingHelp">The amount of the underlying asset you plan to invest (e.g., kHYPE, USDe, etc.)</span>
            </span>
          </div>
          <input id="underlying_amount" class="input" type="number" value="1500" />
        </div>
        <div class="col-4">
          <div class="label-wrapper">
            <label class="label" data-i18n="pointsPerDay">Points / Day / Underlying</label>
            <span class="help-icon">?
              <span class="tooltip" data-i18n="pointsHelp">The number of points earned per underlying asset per day. Please refer to the project's documentation (e.g., Falcon provides 1 point per sUSDe per day)</span>
            </span>
          </div>
          <input id="points_per_day" class="input" type="number" step="0.0001" value="1" />
        </div>
        <div class="col-4">
          <div class="label-wrapper">
            <label class="label" data-i18n="multiplier">Pendle Multiplier</label>
            <span class="help-icon">?
              <span class="tooltip" data-i18n="multiplierHelp">Pendle’s points multiplier bonus, typically with additional boosts during special events (e.g., Falcon sUSDf has a points multiplier of 36)</span>
            </span>
          </div>
          <input id="multiplier_inp" class="input" type="number" value="36" />
        </div>

        <div class="col-12">
          <span id="status" class="loading hidden">
            <span class="spinner"></span>
            <span id="loadingText">Fetching and calculating…</span>
          </span>
        </div>
      </div>
    </div>

    <!-- 概览 -->
    <div id="meta" class="card fade-in hidden">
      <div class="row">
        <div class="row gap-8">
          <span class="pill"><span data-i18n="symbol">Symbol</span>: <span id="symbol" class="mono"></span></span>
          <span class="pill"><span data-i18n="maturity">Maturity (UTC)</span>: <span id="maturity" class="mono"></span></span>
          <span class="pill"><span data-i18n="wImplied">Weighted Implied APY</span>: <span id="wImplied" class="mono ok"></span></span>
        </div>
        <span class="pill">(<span data-i18n="network">Network</span>: <span id="netpill" class="mono"></span>)</span>
      </div>
      <div class="kvs mt-12">
        <div class="kv">
          <div class="k" data-i18n="txnUnique">Transactions (unique)</div>
          <div id="kv_txn" class="v">-</div>
        </div>
        <div class="kv">
          <div class="k" data-i18n="weightedImpliedKV">Weighted Implied APY (Volume-weighted)</div>
          <div id="kv_wimplied" class="v">-</div>
        </div>
        <div class="kv">
          <div class="k" data-i18n="buyNowPoints">Points (Points available now upon purchase)</div>
          <div id="kv_now" class="v">-</div>
        </div>
      </div>
    </div>

    <!-- 图表 -->
    <div id="chartCard" class="card fade-in hidden">
      <div id="chart"></div>
      <div class="foot mt-8" id="chartFoot">在 yt 价格低于公平价值曲线时购买以最大化积分</div>
    </div>

    <!-- 错误 -->
    <div id="error" class="card fade-in hidden">
      <div class="err" id="errmsg"></div>
    </div>

    <div class="foot mt-14" id="dataSrc">
      Data source: <span class="mono">api-v2.pendle.finance</span> · For research only
    </div>
  </div>
</body>
</html>
